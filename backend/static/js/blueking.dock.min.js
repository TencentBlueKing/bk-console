BLUEKING.dock=function(){return{init:function(){BLUEKING.dock.getPos(function(){BLUEKING.dock.setPos()}),BLUEKING.dock.move();var o;$("#dock-container").on("mouseenter",function(){o=setTimeout(function(){$("#dock-container").addClass("showtop")},300)}).on("mouseleave",function(){clearInterval(o),$(this).removeClass("showtop")}),$("body").on("contextmenu","#dock-container",function(o){BLUEKING.popupMenu.hide(),BLUEKING.folderView.hide(),BLUEKING.searchbar.hide(),BLUEKING.docktool.hide();var t=BLUEKING.popupMenu.dock(),e=$(window).width()-o.clientX<t.width()?o.clientX-t.width():o.clientX,n=$(window).height()-o.clientY<t.height()?o.clientY-t.height():o.clientY;return t.css({left:e,top:n}).show(),!1}),$("#dock-container #market").on("mousedown",function(){return!1}).on("click",function(o){BLUEKING.window.create_market()}),$("#dock-container #user_center").on("mousedown",function(){return!1}).on("click",function(o){BLUEKING.window.create_user_center()}),$("#dock-container #bk_iam").on("mousedown",function(){return!1}).on("click",function(o){BLUEKING.window.create_bk_iam()}),$("#dock-container #bk_user_manage").on("mousedown",function(){return!1}).on("click",function(o){BLUEKING.window.create_bk_user_manage()}),$("#dock-container #developer").on("mousedown",function(){return!1}).on("click",function(o){var t=BLUEKING.corefunc.get_dev_url();window.open(t,"_blank")}),$("#dock-bar .dock-tool-appmanage").on("mousedown",function(){return!1}).on("click",function(){BLUEKING.appmanage.set()}),$("#dock-bar .dock-tool-userce").on("mousedown",function(){return!1}).on("click",function(){window.open(BLUEKING.corefunc.get_external_links("community_forums"),"_blank")}),$("#dock-bar .pagination").on("mousedown",function(){return!1}).on("click",function(){BLUEKING.dock.switchDesk($(this).attr("index"))}),$("#dock-bar .dock-tool-start").on("mousedown",function(){return!1}).on("click",function(){return BLUEKING.docktool.show_startmenu(),!1}).on("mouseover",function(){return BLUEKING.DOCKTOOL_VAR.tool_start=!0,BLUEKING.docktool.show_startmenu(),!1}).on("mouseout",function(){return BLUEKING.DOCKTOOL_VAR.tool_start=!1,setTimeout(function(){BLUEKING.DOCKTOOL_VAR.startmenu_state||BLUEKING.DOCKTOOL_VAR.tool_start||BLUEKING.docktool.hide_startmenu()},200),!1}),$("#dock-bar .dock-tool-appearance").on("mousedown",function(){return!1}).on("click",function(){return BLUEKING.docktool.show_appearancemenu(),!1}).on("mouseover",function(){return BLUEKING.DOCKTOOL_VAR.tool_appearance=!0,BLUEKING.docktool.show_appearancemenu(),!1}).on("mouseout",function(){return BLUEKING.DOCKTOOL_VAR.tool_appearance=!1,setTimeout(function(){BLUEKING.DOCKTOOL_VAR.appearancemenu_state||BLUEKING.DOCKTOOL_VAR.tool_appearance||BLUEKING.docktool.hide_appearancemenu()},200),!1}),$("#dock-bar .dock-tool-helps").on("mousedown",function(){return!1}).on("click",function(){return BLUEKING.docktool.show_helpsmenu(),!1}).on("mouseover",function(){return BLUEKING.DOCKTOOL_VAR.tool_helps=!0,BLUEKING.docktool.show_helpsmenu(),!1}).on("mouseout",function(){return BLUEKING.DOCKTOOL_VAR.tool_helps=!1,setTimeout(function(){BLUEKING.DOCKTOOL_VAR.helpsmenu_state||BLUEKING.DOCKTOOL_VAR.tool_helps||BLUEKING.docktool.hide_helpsmenu()},200),!1})},getPos:function(o){$.ajax({type:"POST",async:!1,url:urlPrefix+"get_dock_pos/",success:function(t){BLUEKING.CONFIG.dockPos=t,o&&o()}})},setPos:function(){BLUEKING.dock.switchDesk(BLUEKING.CONFIG.desk);var o=$("#desk-"+BLUEKING.CONFIG.desk),t=$("#desk .desktop-container"),e=o.css("width","100%").width(),n=o.css("height","100%").height();$("#dock-container").removeClass("dock-top dock-left dock-right"),$("#dock-bar").removeClass("top-bar left-bar right-bar").hide(),"top"==BLUEKING.CONFIG.dockPos?($("#dock-bar").addClass("top-bar").children("#dock-container").addClass("dock-top"),t.css({width:e,height:n-$("#task-bar").height()-$("#dock-bar").height(),left:e,top:$("#dock-bar").height()}),o.css({left:0}),$("#dock-bar").show()):"left"==BLUEKING.CONFIG.dockPos?($("#dock-bar").addClass("left-bar").children("#dock-container").addClass("dock-left"),t.css({width:e-$("#dock-bar").width(),height:n-$("#task-bar").height(),left:e+$("#dock-bar").width(),top:0}),o.css({left:$("#dock-bar").width()}),$("#dock-bar").show()):"right"==BLUEKING.CONFIG.dockPos?($("#dock-bar").addClass("right-bar").children("#dock-container").addClass("dock-right"),t.css({width:e-$("#dock-bar").width(),height:n-$("#task-bar").height(),left:e,top:0}),o.css({left:0}),$("#dock-bar").show()):"none"==BLUEKING.CONFIG.dockPos&&(t.css({width:e,height:n-$("#task-bar").height(),left:e,top:0}),o.css({left:0})),BLUEKING.taskbar.resize(),BLUEKING.folderView.setPos()},updatePos:function(o){o!=BLUEKING.CONFIG.dockPos&&void 0!==o&&(BLUEKING.CONFIG.dockPos=o,BLUEKING.dock.setPos(),BLUEKING.app.set(),$.ajax({type:"POST",url:urlPrefix+"set_dock_pos/"+o+"/",success:function(){}}))},move:function(){$("#dock-container").on("mousedown",function(o){if(0==o.button||1==o.button){var t,e=BLUEKING.maskBox.dock();$(document).on("mousemove",function(o){e.show(),t=o.clientY<.2*e.height()?"top":o.clientX<.5*e.width()?"left":"right",$(".dock_drap_effect").removeClass("hover"),$(".dock_drap_effect_"+t).addClass("hover")}).on("mouseup",function(){$(document).off("mousemove").off("mouseup"),e.hide(),BLUEKING.dock.updatePos(t)})}})},switchDesk:function(o){o=/^\+?[1-5]*$/.test(o)?o:1;var t=$("#dock-bar .dock-pagination"),e=BLUEKING.CONFIG.desk,n=o,c=$("#desk-"+e).offset().left,s=$("#desk-"+n).offset().left;e!=n?$("#desk-"+n).hasClass("animated")||$("#desk-"+e).hasClass("animated")||($("#desk-"+e).addClass("animated").animate({left:s},500,"easeInOutCirc",function(){$(this).removeClass("animated")}),$("#desk-"+n).addClass("animated").animate({left:c},500,"easeInOutCirc",function(){$(this).removeClass("animated"),t.removeClass("current-pagination-"+e).addClass("current-pagination-"+n),BLUEKING.CONFIG.desk=n})):t.removeClass("current-pagination-"+e).addClass("current-pagination-"+n)}}}();